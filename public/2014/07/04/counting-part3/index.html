
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Regrouper et compter: Unix (partie 3/5) - smknstd.io</title>
  <meta name="author" content="smknstd">

  
  <meta name="description" content="Pour continuer cette série d’articles de présentation sur la thématique du regroupement et du comptage, j&#8217;ai souhaité aborder ce qui pour moi &hellip;">
  

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.smknstd.io/2014/07/04/counting-part3/">
  <link href="/images/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feedpress.me/smknstd" rel="alternate" title="smknstd.io" type="application/atom+xml">
  <script type="text/javascript" src="//use.typekit.net/oqc4yak.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<script type="text/javascript">
function show_new() {
	var j=0;
    var chila = document.getElementById("blog-archives").children;
	for(var i = 0; i < chila.length; i++) {
			var ch = chila[i].getElementsByTagName('h1')[0];
		    var lien = ch.getElementsByTagName('a')[0].getAttribute("href");
		    mytab = lien.split("/");
		    var parsedDate = new Date(parseInt(mytab[1]), parseInt(mytab[2])-1, parseInt(mytab[3]), 0, 0, 0, 0);
		    var today = new Date();
		    var diffDays = Math.floor((today - parsedDate)/(1000*60*60*24));
		    if(diffDays<45){
		    	j++;
		        ch.innerHTML=chila[i].getElementsByTagName('h1')[0].innerHTML+"<div id='new'>NEW</div>";
		    }else{
		    	// comme les articles sont ordonnées chronologiquement on peut s'arreter de chercher au premier article de plus de 45 jours trouvé 
		    	break;
		    }

	}
	console.log("[function show_new] " + j +" articles de moins de 45 jours (rajout de l'etiquette NEW)");
}
</script>

  
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-5215670-9']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>


</head>

<body onload="show_new()"   >
  <header role="banner">  <div id="logo"><a href="/"><img src="/images/logo.png" alt="logo" /></a></div>
  <div id="legend">{type: "web log", localhost: "Paris", about: "trapped all day, got my cheese and an indexed key"}</div>

</header>
  <nav role="navigation">
</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    <div id="archive_header">
    
      <h2 class="entry-title">Regrouper Et Compter: Unix (Partie 3/5)</h2>
    
    </div>
  </header>
  <header>
    <div id="archive_header">
    
      <h3 class="meta">
        








  


<time datetime="2014-07-04T18:00:00+02:00" pubdate data-updated="true">Jul 4<span>th</span>, 2014</time>
      </h3>
    
    </div>
  </header>


<div class="entry-content"><p>Pour continuer cette série d’articles de présentation sur la thématique du regroupement et du comptage, j&#8217;ai souhaité aborder ce qui pour moi reste souvent mon premier choix et un automatisme : les outils en ligne de commande d&#8217;UNIX ! Lorsque vous utilisez un de ces systèmes, vous héritez d&#8217;innombrables programmes simples, efficaces et robustes. Pourquoi perdre du temps avec de nouveaux outils quand ceux qu&#8217;on a déjà conviennent ?</p>

<p>Lorsqu&#8217;on souhiate compter le nombre d&#8217;éléments uniques on peut s&#8217;en sortir très simplement avec seulement deux d&#8217;entre eux:</p>

<ul>
<li>sort</li>
<li><a href="http://en.wikipedia.org/wiki/Uniq">uniq</a> et son option <code>-c</code></li>
</ul>


<p>La puissance du modèle UNIX fournit beaucoup de souplesse et permet d&#8217;effectuer de nombreuses opérations en cumulant successivement plusieurs fonctionnalités grâce à l&#8217;utilisation du <a href="http://doc.cat-v.org/unix/pipes/">pipe</a>. Pour ne citer que quelques-autres de ces indispensables outils:</p>

<ul>
<li>grep</li>
<li>wc</li>
<li>join</li>
<li>cut</li>
</ul>


<p>En plus d&#8217;être bien documentés, open source et faciles à utiliser, ces outils sont généralement <a href="http://lists.freebsd.org/pipermail/freebsd-current/2010-August/019310.html">très</a> <a href="http://en.wikipedia.org/wiki/Merge_sort">efficients</a>.</p>

<p>Une fois qu&#8217;on s&#8217;y est habitué, il est difficile de s&#8217;en passer. J&#8217;ai découvert que même lorsqu&#8217;on ne disposait que d&#8217;un environnement Windows, il est possible de profiter de quelques-uns de ces outils grâce à certaines solutions comme <a href="http://en.wikipedia.org/wiki/MKS_Toolkit">MKStoolkit</a> ou <a href="http://en.wikipedia.org/wiki/Cygwin">cygwin</a>. Précisons que c&#8217;est une utilisation dégradée par rapport aux outils originaux, car selon mon expérience la qualité du portage et de l&#8217;implémentation laissent largement à désirer.</p>

<p><img src="/images/mkstoolkit.png" title="nutcracker" alt="mkstoolkit" /></p>

<h3>Big Data</h3>

<p>Quand la taille des datasets augmente, l&#8217;approche stricte des algorithmes classiques se montre souvent trop gourmande en ressources. La consommation de mémoire et le temps d’exécution notamment peuvent devenir problématiques. Certaines techniques proposent une approche probabiliste pour améliorer les performances. Citons &#8220;Hyperloglog&#8221; basé sur les travaux du malheureusement défunt chercheur français <a href="http://inria-alumni.fr/index.php/fr/page/article/id/202">Philippe Flajolet</a>, qui permet de compter les éléments uniques dans une collection au prix d&#8217;une faible approximation (faux positifs). Mais d&#8217;autres algorithmes qui partagent l&#8217;approche comme &#8221;<a href="http://en.wikipedia.org/wiki/Bloom_filter">Bloomfilter</a>&#8221; existent. Ils sont implémentés par les géants du web (cassandra, hadoop, google, etc) depuis plusieurs années. Les ressources notamment issues de la recherche abondent, si vous souhaitez tenter de comprendre comment ces algorithmes fonctionnent ;)</p>

<p>Il est évident que ces outils représentent une petite révolution et que leur utilisation va tendre à se démocratiser. La page wikipedia de &#8221;<a href="http://en.wikipedia.org/wiki/HyperLogLog">hyperloglog</a>&#8221; n&#8217;a été créée qu&#8217;en mars 2014 !? Le célèbre système de gestion de &#8220;clé/valeur&#8221; <code>redis</code>, en a déjà fait une <a href="http://antirez.com/news/75">implémentation</a> (disponible depuis avril 2014 avec la version 2.8.9) que j&#8217;aimerai d&#8217;ailleurs décrire dans un prochain article :) J&#8217;ai pour ma part fait quelques essais très concluents avec une implémentation en java que je ne saurai trop vous conseiller: <a href="https://github.com/addthis/stream-lib">stream-lib</a></p>

<p><img src="/images/count-bundesliga.png" title="count unixVSbloom" alt="count" /></p>

<h3>Ressources</h3>

<ul>
<li>un <a href="http://www.gregreda.com/2013/07/15/unix-commands-for-data-science/">article</a> sur les outils d&#8217;UNIX en lignes de commande</li>
<li>quelques <a href="http://lists.freebsd.org/pipermail/freebsd-current/2010-August/019310.html">explications</a> du dev de GNU grep</li>
<li>un <a href="http://highscalability.com/blog/2012/4/5/big-data-counting-how-to-count-a-billion-distinct-objects-us.html">article</a> générique sur la cardinalité plein à craquer de buzzwords</li>
<li>un <a href="http://research.neustar.biz/2012/10/25/sketch-of-the-day-hyperloglog-cornerstone-of-a-big-data-infrastructure/">article</a> sur hyperloglog</li>
<li>un <a href="http://spyced.blogspot.fr/2009/01/all-you-ever-wanted-to-know-about.html">article de 2009</a> sur les bloomfilters</li>
<li>un autre <a href="http://billmill.org/bloomfilter-tutorial/">article</a> sur les bloomfilters avec de nombreuses références</li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">smknstd</span></span>

      








  


<time datetime="2014-07-04T18:00:00+02:00" pubdate data-updated="true">Jul 4<span>th</span>, 2014</time>
      


    </p>
    <div id="archive_header2">
      <div id="archive_header3">
      
        <a class="basic-alignment left" href="/2014/06/28/counting-part2/" title="Previous Post: Regrouper et compter: Mongo (partie 2/5)">&laquo; Regrouper et compter: Mongo (partie 2/5)</a>
      
      
        <a class="basic-alignment right" href="/2014/07/14/counting-part4/" title="Next Post: Regrouper et compter: Hadoop (partie 4/5)">Regrouper et compter: Hadoop (partie 4/5) &raquo;</a>
      
      </div>
    </div>
  </footer>
</article>
</div>

    </div>
  </div>
  <footer role="contentinfo"><p>
  2014 - smknstd -
  <span class="credit">designed with <a href="http://octopress.org">Octopress</a> and hosted by <a href="http://heroku.com">Heroku</a></span>
</p>

</footer>
  












</body>
</html>
